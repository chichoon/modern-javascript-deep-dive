# 04장. 변수

## 4.1 변수란 무엇인가? 왜 필요한가?

- 메모리: 데이터를 저장하는 메모리 셀의 집합체
  - 메모리 셀 하나는 1바이트(8비트)
  - 각 셀은 고유의 주소를 가짐
  - JS는 개발자가 직접 메모리를 제어할 수 없음
- 변수: 값을 저장하기 위한 메모리 공간 또는 메모리 공간 식별용으로 붙인 이름
- 할당: 변수에 값을 저장하는 것
- 참조: 변수에 저장된 값을 읽는 것

## 4.2 식별자

- 식별자(identifier): 어떤 값을 구별해서 식별할 수 있는 고유한 이름
  - 변수, 함수, 클래스 등 모든 이름
  - 메모리 주소를 저장한다. 즉, 메모리 주소에 붙인 이름.
  - 식별자는 메모리 주소와 매핑 관계
  - 모든 식별자는 실행 컨텍스트(execution context)에 등록된다
    - 식별자와 값이 키/값 형식 객체로 등록되어 관리
- 실행 컨텍스트
  - JS 엔진이 소스코드를 평가, 실행하기 위해 필요한 환경 제공
  - 실행 결과를 관리

## 4.3 변수 선언

- 선언: 식별자를 등록하는 것
  - allocate: 메모리 공간 확보
  - [name binding](https://ko.wikipedia.org/wiki/%EB%84%A4%EC%9E%84_%EB%B0%94%EC%9D%B8%EB%94%A9): 식별자와 메모리 주소를 연결
- release: 메모리 공간 해제
  - 해제 전까지 메모리 공간은 보호된다
- 변수 선언 키워드: var, let, const
  - var: 함수 레벨 스코프
  - let, const: 블록 레벨 스코프
- JS의 변수 선언: 아래 두 단계가 동시에 진행
  1.  선언 단계: name binding
  2.  초기화 단계: allocate + undefined 할당
      - 변수의 초기화 단계가 없다면 쓰레기 값이 할당되지만, JS는 암묵적 초기화를 수행하므로 undefined가 할당된다
- 선언하지 않은 식별자에 접근하면 ReferenceError 발생

## 4.4 변수 선언의 실행 시점과 변수 호이스팅

- 호이스팅(variable hoisting)
  - JS의 모든 선언문은 런타임 이전 단계(평가 과정)에 먼저 실행
  - 이 때문에 변수 선언문이 소스코드 가장 위에 위치한 것처럼 동작
  - 호이스팅 되는 식별자: var, let, const, function, function\* 키워드로 선언한 식별자

## 4.5 값의 할당

- 할당 연산자: `=`
- JS 엔진은 변수 선언과 할당을 단축 표현해도, 2개의 문으로 나누어 각각 실행
- 선언은 런타임 이전, 할당은 런타임에 실행
  ```js
  console.log(score); // undefined (호이스팅, 암묵적 초기화된 값)
  var score = 80; // 변수 선언과 값 할당
  console.log(score); // 80
  ```

## 4.6 값의 재할당

- 재할당: 이미 값이 할당된 변수에 값을 다시 할당
  - JS는 암묵적 초기화가 되기 때문에, 최초 할당도 사실은 재할당
- 새로운 메모리 공간을 확보하고 그곳에 할당
- 기존 값의 메모리 공간은 가비지 콜렉터에 의해 자동 해제
- 가비지 콜렉터
  - 할당된 메모리 공간을 주기적으로 검사
  - 더 이상 사용하지 않는(즉, 어떤 식별자도 참조하지 않는) 메모리 공간 해제
  - JS는 매니지드 언어

### 메모리 관리 방식

|                       | unmanged language                 | managed language                     |
| --------------------- | --------------------------------- | ------------------------------------ |
| 언어                  | C                                 | JavaScript                           |
| 메모리 관리 방식      | 개발자가 명시적으로 메모리를 관리 | 가비지 콜렉터가 자동으로 메모리 관리 |
| low-level 메모리 관리 | `malloc()`, `free()`              | 불가능                               |
| 장점                  | 개발자 역량에 따라 최적의 성능    | 개발 생산성                          |
| 단점                  | 치명적 오류 가능성                | 성능 손실                            |

## 4.7 식별자 네이밍 규칙

- 문자, 숫자, `_`, `$`만 가능
- 숫자로 시작 불가
- [예약어](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#keywords) 사용 불가
- 대소문자 구별
- 유니코드 문자 허용(하지만 권장하지 않음)
- 네이밍 컨벤션: ECMAScript 사양과 같은 케이스를 사용해서 가독성 높히기
  - 변수명, 함수명: 카멜 케이스 `myName`
  - 생성자 함수명, 클래스명: 파스칼 케이스 `MyName`
